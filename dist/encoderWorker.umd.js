(function () {
  function initWorker () {
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var c=function(){function e(t,n,r,i){switch(u(this,e),this._size=n,this._module=t,this._size){case 1:this._heapArray=r?this._module.HEAP8:this._module.HEAPU8;break;case 2:this._heapArray=r?this._module.HEAP16:this._module.HEAPU16;break;case 4:this._heapArray=r?this._module.HEAP32:this._module.HEAPU32;break;default:this._heapArray=this._module.HEAPU8}i&&(this._size=4,this._heapArray=this._module.HEAPF32),this._pointer=this._module._malloc(n)}return l(e,[{key:"free",value:function(){this._module._free(this.pointer)}},{key:"pointer",get:function(){return this._pointer}},{key:"value",get:function(){var e=0;switch(this._size){case 2:e=1;break;case 4:e=2;break;default:throw new Error("Pointer can be only deferenced as integer-sized")}return this._heapArray[this.pointer>>e]},set:function(e){var t=0;switch(this._size){case 2:t=1;break;case 4:t=2;break;default:throw new Error("Pointer can be only deferenced as integer-sized")}this._heapArray[this.pointer>>t]=e}}]),e}(),f=function(e){function t(e,n){var o;return u(this,t),o=r(this,i(t).call(this,e,4,!0,!1)),void 0!==n&&(o.value=n),o}return o(t,c),t}(),p=function(e){function t(e,n){var o;return u(this,t),o=r(this,i(t).call(this,e,4,!1,!1)),void 0!==n&&(o.value=n),o}return o(t,c),t}(),_=function(e){function t(e,n,o,a,s){var l;u(this,t),l=r(this,i(t).call(this,e,n*o,a,s));var c=0;switch(o){case 1:l._heapArray=a?l._module.HEAP8:l._module.HEAPU8,c=0;break;case 2:l._heapArray=a?l._module.HEAP16:l._module.HEAPU16,c=1;break;case 4:l._heapArray=a?l._module.HEAP32:l._module.HEAPU32,c=2;break;default:throw new Error("Unit size must be an integer-size")}s&&(l._heapArray=l._module.HEAPF32,c=2);var f=l._pointer>>c;return l._buffer=l._heapArray.subarray(f,f+n),l._length=n,l}return o(t,c),l(t,[{key:"set",value:function(e,t){this._buffer.set(e,t)}},{key:"subarray",value:function(e,t){return this._buffer.subarray(e,t)}},{key:"length",get:function(){return this._length}}]),t}(),m=function(e){function t(e,n){return u(this,t),r(this,i(t).call(this,e,n,4,!0,!0))}return o(t,_),t}(),y=function(e){function t(e,n){return u(this,t),r(this,i(t).call(this,e,n,1,!1,!1))}return o(t,_),t}(),d=function(){function e(t){u(this,e),this._module=t}return l(e,[{key:"mallocInt32",value:function(e){return new f(this._module,e)}},{key:"mallocUint32",value:function(e){return new p(this._module,e)}},{key:"mallocUint8Buffer",value:function(e){return new y(this._module,e)}},{key:"mallocFloat32Buffer",value:function(e){return new m(this._module,e)}}]),e}();e.exports={writeString:function(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},EmscriptenMemoryAllocator:d}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r,i=n(3),o=n(4),a=n(5);self.onmessage=function(e){var t=e.data.command;switch(t){case"loadEncoder":var n,u=e.data,s=u.mimeType,l=u.wasmPath;switch(s){case"audio/wav":case"audio/wave":n=i;break;case"audio/webm":n=o;break;case"audio/ogg":n=a}var c={};l&&(c.locateFile=function(e,t){return e.match(/.wasm/)?l:t+e}),n(c).then(function(e){r=e,self.postMessage({command:"readyToInit"})});break;case"init":var f=e.data,p=f.sampleRate,_=f.channelCount,m=f.bitsPerSecond;r.init(p,_,m);break;case"pushInputData":for(var y=e.data,d=y.channelBuffers,h=(y.length,y.duration,0);h<d.length;h++)d[h]=new Float32Array(d[h].buffer);r.encode(d);break;case"getEncodedData":case"done":"done"===t&&r.encodeFinalFrame();var v=r.flush();self.postMessage({command:"done"===t?"lastEncodedData":"encodedData",buffers:v},v),"done"===t&&(r.close(),self.close())}}},function(e,t,n){function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(0).writeString,a=Int16Array.BYTES_PER_ELEMENT,u=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={inputSampleRate:t,channelCount:n},this.encodedBuffers=[]}var t,n,r;return t=e,(n=[{key:"encode",value:function(e){for(var t=e[0].length,n=new ArrayBuffer(t*a*this.config.channelCount),r=new DataView(n),i=0;i<this.config.channelCount;i++)for(var o=e[i],u=0;u<t;u++){var s=32767*o[u]|0;s>32767?s=32767:s<-32768&&(s=-32768);var l=(u*this.config.channelCount+i)*a;r.setInt16(l,0|s,!0)}this.encodedBuffers.push(n)}},{key:"getHeader",value:function(){var e=this.encodedBuffers.reduce(function(e,t){return e+t.byteLength},0),t=new ArrayBuffer(44),n=new DataView(t);return o(n,0,"RIFF"),n.setUint32(4,36+e,!0),o(n,8,"WAVE"),o(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,this.config.channelCount,!0),n.setUint32(24,this.config.inputSampleRate,!0),n.setUint32(28,this.config.inputSampleRate*a*this.config.channelCount,!0),n.setUint16(32,a*this.config.channelCount,!0),n.setUint16(34,8*a,!0),o(n,36,"data"),n.setUint32(40,e,!0),t}}])&&i(t.prototype,n),r&&i(t,r),e}();e.exports=function(e){return new Promise(function(t,n){(e=void 0!==e&&e||{}).init=function(t,n,r){e.encoder=new u(t,n,r)},e.encode=function(t){e.encoder.encode(t)},e.encodeFinalFrame=function(){},e.flush=function(){var t=e.encoder.getHeader(),n=e.encoder.encodedBuffers.splice(0,e.encoder.encodedBuffers.length);return[t].concat(r(n))},e.close=function(){},t(e)})}},function(e,t,n){(function(e){var r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a,u=(a="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){e=void 0!==(e=e||{})?e:{};var t=n(0).EmscriptenMemoryAllocator,r=48e3,u=4e3,s=20,l=4096,c=function(){function n(i,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.config={inputSampleRate:i,channelCount:o},this.encodedBuffers=[],this.memory=new t(e),this._opus_encoder_create=e._opus_encoder_create,this._opus_encoder_ctl=e._opus_encoder_ctl,this._opus_encode_float=e._opus_encode_float,this._opus_encoder_destroy=e._opus_encoder_destroy,this._speex_resampler_init=e._speex_resampler_init,this._speex_resampler_process_interleaved_float=e._speex_resampler_process_interleaved_float,this._speex_resampler_destroy=e._speex_resampler_destroy,this._contrainer=new e.WebMContainer(r,o,Math.floor(4294967295*Math.random())),this.OpusInitCodec(r,o,a),this.SpeexInitResampler(i,r,o),this.inputSamplesPerChannel=i*s/1e3,this.outputSamplePerChannel=r*s/1e3,this.inputBufferIndex=0,this.mInputBuffer=this.memory.mallocFloat32Buffer(this.inputSamplesPerChannel*o),this.mResampledBuffer=this.memory.mallocFloat32Buffer(this.outputSamplePerChannel*o),this.mOutputBuffer=this.memory.mallocUint8Buffer(u),this.interleavedBuffers=1!==o?new Float32Array(l*o):void 0}var i,a,c;return i=n,(a=[{key:"encode",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var t=this.interleave(e),n=0;n<t.length;){var r=Math.min(this.mInputBuffer.length-this.inputBufferIndex,t.length-n);if(this.mInputBuffer.set(t.subarray(n,n+r),this.inputBufferIndex),this.inputBufferIndex+=r,this.inputBufferIndex>=this.mInputBuffer.length){var i=this.memory.mallocUint32(this.inputSamplesPerChannel),o=this.memory.mallocUint32(this.outputSamplePerChannel),a=this._speex_resampler_process_interleaved_float(this.resampler,this.mInputBuffer.pointer,i.pointer,this.mResampledBuffer.pointer,o.pointer);if(i.free(),o.free(),0!==a)throw new Error("Resampling error.");var u=this._opus_encode_float(this.encoder,this.mResampledBuffer.pointer,this.outputSamplePerChannel,this.mOutputBuffer.pointer,this.mOutputBuffer.length);if(u<0)throw new Error("Opus encoding error.");this._contrainer.writeFrame(this.mOutputBuffer.pointer,u,this.outputSamplePerChannel),this.inputBufferIndex=0}n+=r}}},{key:"close",value:function(){e.destroy(this._contrainer),this.mInputBuffer.free(),this.mResampledBuffer.free(),this.mOutputBuffer.free(),this._opus_encoder_destroy(this.encoder),this._speex_resampler_destroy(this.resampler)}},{key:"interleave",value:function(e){var t=e.length;if(1===t)return e[0];for(var n=0;n<t;n++)for(var r=e[n],i=0;i<r.length;i++)this.interleavedBuffers[i*t+n]=r[i];return this.interleavedBuffers}},{key:"OpusInitCodec",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.memory.mallocUint32(void 0);this.encoder=this._opus_encoder_create(e,t,2049,r.pointer);var i=r.value;if(r.free(),0!==i)throw new Error("Opus encodor initialization failed.");n&&this.OpusSetOpusControl(4002,n)}},{key:"OpusSetOpusControl",value:function(e,t){var n=this.memory.mallocInt32(t);this._opus_encoder_ctl(this.encoder,e,n.pointer),n.free()}},{key:"SpeexInitResampler",value:function(e,t,n){var r=this.memory.mallocUint32(void 0);this.resampler=this._speex_resampler_init(n,e,t,6,r.pointer);var i=r.value;if(r.free(),0!==i)throw new Error("Initializing resampler failed.")}}])&&o(i.prototype,a),c&&o(i,c),n}();e.init=function(t,n,r){e.encoder=new c(t,n,r)},e.encode=function(t){e.encoder.encode(t)},e.encodeFinalFrame=function(){},e.flush=function(){return e.encoder.encodedBuffers.splice(0,e.encoder.encodedBuffers.length)},e.close=function(){e.encoder.close()};var f,p={};for(f in e)e.hasOwnProperty(f)&&(p[f]=e[f]);e.arguments=[],e.thisProgram="./this.program",e.quit=function(e,t){throw t},e.preRun=[],e.postRun=[];var _=!1,m=!0,y="";(_||m)&&(m?y=self.location.href:document.currentScript&&(y=document.currentScript.src),a&&(y=a),y=0!==y.indexOf("blob:")?y.substr(0,y.lastIndexOf("/")+1):"",e.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(e.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),e.readAsync=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)},e.setWindowTitle=function(e){document.title=e});var d=e.print||("undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null),h=e.printErr||("undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||d);for(f in p)p.hasOwnProperty(f)&&(e[f]=p[f]);p=void 0;var v={"f64-rem":function(e,t){return e%t},debugger:function(){}};new Array(0);var g=0,b=function(e){g=e},w=!1;function E(e,t){e||Oe("Assertion failed: "+t)}var C,A,O,S="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function T(e,t){for(var n=t;e[n];)++n;if(n-t>16&&e.subarray&&S)return S.decode(e.subarray(t,n));for(var r="";;){var i=e[t++];if(!i)return r;if(128&i){var o=63&e[t++];if(192!=(224&i)){var a=63&e[t++];if((i=224==(240&i)?(15&i)<<12|o<<6|a:(7&i)<<18|o<<12|a<<6|63&e[t++])<65536)r+=String.fromCharCode(i);else{var u=i-65536;r+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else r+=String.fromCharCode((31&i)<<6|o)}else r+=String.fromCharCode(i)}}function M(e){return T(A,e)}function P(){e.HEAP8=new Int8Array(C),e.HEAP16=new Int16Array(C),e.HEAP32=O=new Int32Array(C),e.HEAPU8=A=new Uint8Array(C),e.HEAPU16=new Uint16Array(C),e.HEAPU32=new Uint32Array(C),e.HEAPF32=new Float32Array(C),e.HEAPF64=new Float64Array(C)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var R=42336;function x(){Oe("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+B+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}var B=e.TOTAL_MEMORY||16777216;function I(t){for(;t.length>0;){var n=t.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?e.dynCall_v(r):e.dynCall_vi(r,n.arg):r(void 0===n.arg?null:n.arg)}else n()}}B<5242880&&h("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+B+"! (TOTAL_STACK=5242880)"),e.buffer?C=e.buffer:("object"===("undefined"==typeof WebAssembly?"undefined":i(WebAssembly))&&"function"==typeof WebAssembly.Memory?(e.wasmMemory=new WebAssembly.Memory({initial:B/65536,maximum:B/65536}),C=e.wasmMemory.buffer):C=new ArrayBuffer(B),e.buffer=C),P(),O[R>>2]=5285472;var j=[],L=[],k=[],N=[],D=!1;Math.abs;var U=Math.cos,F=Math.sin,H=(Math.tan,Math.acos,Math.asin,Math.atan,Math.atan2,Math.exp,Math.log,Math.sqrt,Math.ceil,Math.floor,Math.pow,Math.imul,Math.fround,Math.round,Math.min,Math.max,Math.clz32,Math.trunc,0),W=null,z=null;e.preloadedImages={},e.preloadedAudios={};var V="data:application/octet-stream;base64,";function G(e){return String.prototype.startsWith?e.startsWith(V):0===e.indexOf(V)}var K,Y="WebMOpusEncoder.wasm";function X(t){var n=e.buffer;t.byteLength<n.byteLength&&h("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r,i=new Int8Array(n);new Int8Array(t).set(i),r=t,e.buffer=C=r,P()}function q(){try{if(e.wasmBinary)return new Uint8Array(e.wasmBinary);if(e.readBinary)return e.readBinary(Y);throw"both async and sync fetching of the wasm failed"}catch(e){Oe(e)}}function Q(t){if("object"!==("undefined"==typeof WebAssembly?"undefined":i(WebAssembly)))return h("no native wasm support detected"),!1;if(!(e.wasmMemory instanceof WebAssembly.Memory))return h("no native wasm Memory in use"),!1;t.memory=e.wasmMemory;var n={global:{NaN:NaN,Infinity:1/0},"global.Math":Math,env:t,asm2wasm:v,parent:e};function r(t,n){var r=t.exports;r.memory&&X(r.memory),e.asm=r,function(t){if(H--,e.monitorRunDependencies&&e.monitorRunDependencies(H),0==H&&(null!==W&&(clearInterval(W),W=null),z)){var n=z;z=null,n()}}()}if(H++,e.monitorRunDependencies&&e.monitorRunDependencies(H),e.instantiateWasm)try{return e.instantiateWasm(n,r)}catch(e){return h("Module.instantiateWasm callback failed with error: "+e),!1}function o(e){r(e.instance)}function a(t){(e.wasmBinary||!_&&!m||"function"!=typeof fetch?new Promise(function(e,t){e(q())}):fetch(Y,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Y+"'";return e.arrayBuffer()}).catch(function(){return q()})).then(function(e){return WebAssembly.instantiate(e,n)}).then(t,function(e){h("failed to asynchronously prepare wasm: "+e),Oe(e)})}return e.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||G(Y)||"function"!=typeof fetch?a(o):WebAssembly.instantiateStreaming(fetch(Y,{credentials:"same-origin"}),n).then(o,function(e){h("wasm streaming compile failed: "+e),h("falling back to ArrayBuffer instantiation"),a(o)}),{}}G(Y)||(K=Y,Y=e.locateFile?e.locateFile(K,y):y+K),e.reallocBuffer=function(t){return function(t){var n,r;(n=t)%(r=65536)>0&&(n+=r-n%r),t=n;var i=e.buffer.byteLength;try{return-1!==e.wasmMemory.grow((t-i)/65536)?e.buffer=e.wasmMemory.buffer:null}catch(e){return null}}(t)},e.asm=function(t,n,r){if(!n.table){var o=e.wasmTableSize,a=e.wasmMaxTableSize;"object"===("undefined"==typeof WebAssembly?"undefined":i(WebAssembly))&&"function"==typeof WebAssembly.Table?n.table=void 0!==a?new WebAssembly.Table({initial:o,maximum:a,element:"anyfunc"}):new WebAssembly.Table({initial:o,element:"anyfunc"}):n.table=new Array(o),e.wasmTable=n.table}return n.__memory_base||(n.__memory_base=e.STATIC_BASE),n.__table_base||(n.__table_base=0),Q(n)},e.STATIC_BASE=1024,e.STATIC_BUMP=41568;var Z=42576;function J(){return!!J.uncaught_exception}function $(e){try{return he(e)}catch(e){}}var ee={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||ee.infos[e])return e;for(var t in ee.infos)for(var n=+t,r=ee.infos[n].adjusted,i=r.length,o=0;o<i;o++)if(r[o]===e)return n;return e},addRef:function(e){e&&ee.infos[e].refcount++},decRef:function(t){if(t){var n=ee.infos[t];E(n.refcount>0),n.refcount--,0!==n.refcount||n.rethrown||(n.destructor&&e.dynCall_vi(n.destructor,t),delete ee.infos[t],$(t))}},clearRef:function(e){e&&(ee.infos[e].refcount=0)}};function te(){var t=ee.last;if(!t)return 0|(b(0),0);var n=ee.infos[t],r=n.type;if(!r)return 0|(b(0),t);var i=Array.prototype.slice.call(arguments);e.___cxa_is_pointer_type(r),te.buffer||(te.buffer=ve(4)),O[te.buffer>>2]=t,t=te.buffer;for(var o=0;o<i.length;o++)if(i[o]&&e.___cxa_can_catch(i[o],r,t))return t=O[t>>2],n.adjusted.push(t),0|(b(i[o]),t);return t=O[t>>2],0|(b(r),t)}var ne={buffers:[null,[],[]],printChar:function(e,t){var n=ne.buffers[e];E(n),0===t||10===t?((1===e?d:h)(T(n,0)),n.length=0):n.push(t)},varargs:0,get:function(e){return ne.varargs+=4,O[ne.varargs-4>>2]},getStr:function(){return M(ne.get())},get64:function(){var e=ne.get(),t=ne.get();return E(e>=0?0===t:-1===t),e},getZero:function(){E(0===ne.get())}};function re(){return B}var ie=U;function oe(e){return Math.pow(2,e)}function ae(e){return Math.log(e)/Math.LN10}var ue=F;function se(){var e=se;return e.LLVM_SAVEDSTACKS||(e.LLVM_SAVEDSTACKS=[]),e.LLVM_SAVEDSTACKS.push(be()),e.LLVM_SAVEDSTACKS.length-1}var le={},ce=1,fe={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};e.wasmTableSize=126,e.wasmMaxTableSize=126,e.asmLibraryArg={abort:Oe,assert:E,setTempRet0:b,getTempRet0:function(){return g},abortOnCannotGrowMemory:x,invoke_i:function(t){var n=be();try{return e.dynCall_i(t)}catch(t){if(ge(n),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_ii:function(t,n){var r=be();try{return e.dynCall_ii(t,n)}catch(t){if(ge(r),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iii:function(t,n,r){var i=be();try{return e.dynCall_iii(t,n,r)}catch(t){if(ge(i),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iiii:function(t,n,r,i){var o=be();try{return e.dynCall_iiii(t,n,r,i)}catch(t){if(ge(o),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iij:function(t,n,r,i){var o=be();try{return e.dynCall_iij(t,n,r,i)}catch(t){if(ge(o),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iijf:function(t,n,r,i,o){var a=be();try{return e.dynCall_iijf(t,n,r,i,o)}catch(t){if(ge(a),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iiji:function(t,n,r,i,o){var a=be();try{return e.dynCall_iiji(t,n,r,i,o)}catch(t){if(ge(a),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_iijj:function(t,n,r,i,o,a){var u=be();try{return e.dynCall_iijj(t,n,r,i,o,a)}catch(t){if(ge(u),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_ji:function(t,n){var r=be();try{return e.dynCall_ji(t,n)}catch(t){if(ge(r),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_jii:function(t,n,r){var i=be();try{return e.dynCall_jii(t,n,r)}catch(t){if(ge(i),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_jij:function(t,n,r,i){var o=be();try{return e.dynCall_jij(t,n,r,i)}catch(t){if(ge(o),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_v:function(t){var n=be();try{e.dynCall_v(t)}catch(t){if(ge(n),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_vi:function(t,n){var r=be();try{e.dynCall_vi(t,n)}catch(t){if(ge(r),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_vii:function(t,n,r){var i=be();try{e.dynCall_vii(t,n,r)}catch(t){if(ge(i),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_viii:function(t,n,r,i){var o=be();try{e.dynCall_viii(t,n,r,i)}catch(t){if(ge(o),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_vijj:function(t,n,r,i,o,a){var u=be();try{e.dynCall_vijj(t,n,r,i,o,a)}catch(t){if(ge(u),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},__ZSt18uncaught_exceptionv:J,___cxa_allocate_exception:function(e){return ve(e)},___cxa_begin_catch:function(e){var t=ee.infos[e];return t&&!t.caught&&(t.caught=!0,J.uncaught_exception--),t&&(t.rethrown=!1),ee.caught.push(e),ee.addRef(ee.deAdjust(e)),e},___cxa_end_catch:function(){e.setThrew(0);var t=ee.caught.pop();t&&(ee.decRef(ee.deAdjust(t)),ee.last=0)},___cxa_find_matching_catch:te,___cxa_find_matching_catch_2:function(){return te.apply(null,arguments)},___cxa_find_matching_catch_3:function(){return te.apply(null,arguments)},___cxa_free_exception:$,___cxa_throw:function(e,t,n){throw ee.infos[e]={ptr:e,adjusted:[e],type:t,destructor:n,refcount:0,caught:!1,rethrown:!1},ee.last=e,"uncaught_exception"in J?J.uncaught_exception++:J.uncaught_exception=1,e},___gxx_personality_v0:function(){},___lock:function(){},___resumeException:function(e){throw ee.last||(ee.last=e),e},___setErrNo:function(t){return e.___errno_location&&(O[e.___errno_location()>>2]=t),t},___syscall140:function(e,t){ne.varargs=t;try{var n=ne.getStreamFromFD(),r=(ne.get(),ne.get()),i=ne.get(),o=ne.get(),a=r;return FS.llseek(n,a,o),O[i>>2]=n.position,n.getdents&&0===a&&0===o&&(n.getdents=null),0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Oe(e),-e.errno}},___syscall145:function(e,t){ne.varargs=t;try{var n=ne.getStreamFromFD(),r=ne.get(),i=ne.get();return ne.doReadv(n,r,i)}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Oe(e),-e.errno}},___syscall146:function(e,t){ne.varargs=t;try{for(var n=ne.get(),r=ne.get(),i=ne.get(),o=0,a=0;a<i;a++){for(var u=O[r+8*a>>2],s=O[r+(8*a+4)>>2],l=0;l<s;l++)ne.printChar(n,A[u+l]);o+=s}return o}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Oe(e),-e.errno}},___syscall221:function(e,t){ne.varargs=t;try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Oe(e),-e.errno}},___syscall5:function(e,t){ne.varargs=t;try{var n=ne.getStr(),r=ne.get(),i=ne.get();return FS.open(n,r,i).fd}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Oe(e),-e.errno}},___syscall54:function(e,t){ne.varargs=t;try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Oe(e),-e.errno}},___syscall6:function(e,t){ne.varargs=t;try{var n=ne.getStreamFromFD();return FS.close(n),0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||Oe(e),-e.errno}},___unlock:function(){},_abort:function(){e.abort()},_emscriptenPushBuffer:function(t,n){var r=new Uint8Array(e.HEAPU8.buffer,t,n);e.encoder.encodedBuffers.push(new Uint8Array(r).buffer)},_emscripten_get_heap_size:re,_emscripten_memcpy_big:function(e,t,n){A.set(A.subarray(t,t+n),e)},_emscripten_resize_heap:function(e){x()},_llvm_cos_f64:ie,_llvm_exp2_f32:oe,_llvm_exp2_f64:function(){return oe.apply(null,arguments)},_llvm_log10_f32:ae,_llvm_log10_f64:function(){return ae.apply(null,arguments)},_llvm_sin_f64:ue,_llvm_stackrestore:function(e){var t=se,n=t.LLVM_SAVEDSTACKS[e];t.LLVM_SAVEDSTACKS.splice(e,1),ge(n)},_llvm_stacksave:se,_pthread_getspecific:function(e){return le[e]||0},_pthread_key_create:function(e,t){return 0==e?fe.EINVAL:(O[e>>2]=ce,le[ce]=0,ce++,0)},_pthread_once:function t(n,r){t.seen||(t.seen={}),n in t.seen||(e.dynCall_v(r),t.seen[n]=1)},_pthread_setspecific:function(e,t){return e in le?(le[e]=t,0):fe.EINVAL},_time:function(e){var t=Date.now()/1e3|0;return e&&(O[e>>2]=t),t},flush_NO_FILESYSTEM:function(){var t=e._fflush;t&&t(0);var n=ne.buffers;n[1].length&&ne.printChar(1,10),n[2].length&&ne.printChar(2,10)},DYNAMICTOP_PTR:R,tempDoublePtr:Z};var pe=e.asm({},e.asmLibraryArg,C);e.asm=pe,e.___cxa_can_catch=function(){return e.asm.___cxa_can_catch.apply(null,arguments)},e.___cxa_is_pointer_type=function(){return e.asm.___cxa_is_pointer_type.apply(null,arguments)},e.___em_js__emscriptenPushBuffer=function(){return e.asm.___em_js__emscriptenPushBuffer.apply(null,arguments)};var _e=e._emscripten_bind_VoidPtr___destroy___0=function(){return e.asm._emscripten_bind_VoidPtr___destroy___0.apply(null,arguments)},me=e._emscripten_bind_WebMContainer_WebMContainer_3=function(){return e.asm._emscripten_bind_WebMContainer_WebMContainer_3.apply(null,arguments)},ye=e._emscripten_bind_WebMContainer___destroy___0=function(){return e.asm._emscripten_bind_WebMContainer___destroy___0.apply(null,arguments)},de=e._emscripten_bind_WebMContainer_writeFrame_3=function(){return e.asm._emscripten_bind_WebMContainer_writeFrame_3.apply(null,arguments)},he=e._free=function(){return e.asm._free.apply(null,arguments)},ve=(e._llvm_bswap_i32=function(){return e.asm._llvm_bswap_i32.apply(null,arguments)},e._malloc=function(){return e.asm._malloc.apply(null,arguments)}),ge=(e._memcpy=function(){return e.asm._memcpy.apply(null,arguments)},e._memmove=function(){return e.asm._memmove.apply(null,arguments)},e._memset=function(){return e.asm._memset.apply(null,arguments)},e._opus_encode_float=function(){return e.asm._opus_encode_float.apply(null,arguments)},e._opus_encoder_create=function(){return e.asm._opus_encoder_create.apply(null,arguments)},e._opus_encoder_ctl=function(){return e.asm._opus_encoder_ctl.apply(null,arguments)},e._opus_encoder_destroy=function(){return e.asm._opus_encoder_destroy.apply(null,arguments)},e._rintf=function(){return e.asm._rintf.apply(null,arguments)},e._sbrk=function(){return e.asm._sbrk.apply(null,arguments)},e._speex_resampler_destroy=function(){return e.asm._speex_resampler_destroy.apply(null,arguments)},e._speex_resampler_init=function(){return e.asm._speex_resampler_init.apply(null,arguments)},e._speex_resampler_process_interleaved_float=function(){return e.asm._speex_resampler_process_interleaved_float.apply(null,arguments)},e.establishStackSpace=function(){return e.asm.establishStackSpace.apply(null,arguments)},e.setThrew=function(){return e.asm.setThrew.apply(null,arguments)},e.stackAlloc=function(){return e.asm.stackAlloc.apply(null,arguments)},e.stackRestore=function(){return e.asm.stackRestore.apply(null,arguments)}),be=e.stackSave=function(){return e.asm.stackSave.apply(null,arguments)},we=(e.dynCall_i=function(){return e.asm.dynCall_i.apply(null,arguments)},e.dynCall_ii=function(){return e.asm.dynCall_ii.apply(null,arguments)},e.dynCall_iii=function(){return e.asm.dynCall_iii.apply(null,arguments)},e.dynCall_iiii=function(){return e.asm.dynCall_iiii.apply(null,arguments)},e.dynCall_iiiiiii=function(){return e.asm.dynCall_iiiiiii.apply(null,arguments)},e.dynCall_iij=function(){return e.asm.dynCall_iij.apply(null,arguments)},e.dynCall_iijf=function(){return e.asm.dynCall_iijf.apply(null,arguments)},e.dynCall_iiji=function(){return e.asm.dynCall_iiji.apply(null,arguments)},e.dynCall_iijj=function(){return e.asm.dynCall_iijj.apply(null,arguments)},e.dynCall_ji=function(){return e.asm.dynCall_ji.apply(null,arguments)},e.dynCall_jii=function(){return e.asm.dynCall_jii.apply(null,arguments)},e.dynCall_jij=function(){return e.asm.dynCall_jij.apply(null,arguments)},e.dynCall_v=function(){return e.asm.dynCall_v.apply(null,arguments)},e.dynCall_vi=function(){return e.asm.dynCall_vi.apply(null,arguments)},e.dynCall_vii=function(){return e.asm.dynCall_vii.apply(null,arguments)},e.dynCall_viii=function(){return e.asm.dynCall_viii.apply(null,arguments)},e.dynCall_viiii=function(){return e.asm.dynCall_viiii.apply(null,arguments)},e.dynCall_viiiii=function(){return e.asm.dynCall_viiiii.apply(null,arguments)},e.dynCall_viiiiii=function(){return e.asm.dynCall_viiiiii.apply(null,arguments)},e.dynCall_viiiiiii=function(){return e.asm.dynCall_viiiiiii.apply(null,arguments)},e.dynCall_vijj=function(){return e.asm.dynCall_vijj.apply(null,arguments)},0);Math.random=function(){return we=Math.pow(we+1.8912,3)%1};var Ee=1e4;function Ce(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Ae(t){function n(){e.calledRun||(e.calledRun=!0,w||(D||(D=!0,I(L)),I(k),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)t=e.postRun.shift(),N.unshift(t);var t;I(N)}()))}t=t||e.arguments,H>0||(function(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)t=e.preRun.shift(),j.unshift(t);var t;I(j)}(),H>0||e.calledRun||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),n()},1)):n()))}function Oe(t){throw e.onAbort&&e.onAbort(t),void 0!==t?(d(t),h(t),t=JSON.stringify(t)):t="",w=!0,"abort("+t+"). Build with -s ASSERTIONS=1 for more info."}if(Date.now=function(){return Ee++},"object"===("undefined"==typeof performance?"undefined":i(performance))&&(performance.now=Date.now),e||(e={}),e.thisProgram="thisProgram",e.asm=pe,e.then=function(t){if(e.calledRun)t(e);else{var n=e.onRuntimeInitialized;e.onRuntimeInitialized=function(){n&&n(),t(e)}}return e},Ce.prototype=new Error,Ce.prototype.constructor=Ce,z=function t(){e.calledRun||Ae(),e.calledRun||(z=t)},e.run=Ae,e.abort=Oe,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();function Se(){}function Te(e){return(e||Se).__cache__}function Me(e,t){var n=Te(t),r=n[e];return r||((r=Object.create((t||Se).prototype)).ptr=e,n[e]=r)}function Pe(){throw"cannot construct a VoidPtr, no constructor in IDL"}function Re(e,t,n){e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),n&&"object"===i(n)&&(n=n.ptr),this.ptr=me(e,t,n),Te(Re)[this.ptr]=this}return e.noExitRuntime=!0,Ae(),Se.prototype=Object.create(Se.prototype),Se.prototype.constructor=Se,Se.prototype.__class__=Se,Se.__cache__={},e.WrapperObject=Se,e.getCache=Te,e.wrapPointer=Me,e.castObject=function(e,t){return Me(e.ptr,t)},e.NULL=Me(0),e.destroy=function(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete Te(e.__class__)[e.ptr]},e.compare=function(e,t){return e.ptr===t.ptr},e.getPointer=function(e){return e.ptr},e.getClass=function(e){return e.__class__},Pe.prototype=Object.create(Se.prototype),Pe.prototype.constructor=Pe,Pe.prototype.__class__=Pe,Pe.__cache__={},e.VoidPtr=Pe,Pe.prototype.__destroy__=Pe.prototype.__destroy__=function(){var e=this.ptr;_e(e)},Re.prototype=Object.create(Se.prototype),Re.prototype.constructor=Re,Re.prototype.__class__=Re,Re.__cache__={},e.WebMContainer=Re,Re.prototype.writeFrame=Re.prototype.writeFrame=function(e,t,n){var r=this.ptr;e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),n&&"object"===i(n)&&(n=n.ptr),de(r,e,t,n)},Re.prototype.__destroy__=Re.prototype.__destroy__=function(){var e=this.ptr;ye(e)},function(){function t(){}var n;e.calledRun||(n=t,k.unshift(n))}(),e});"object"===i(t)&&"object"===i(e)?e.exports=u:void 0===(r=function(){return u}.apply(t,[]))||(e.exports=r)}).call(this,n(1)(e))},function(e,t,n){(function(e){var r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a,u=(a="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){e=void 0!==(e=e||{})?e:{};var t=n(0).EmscriptenMemoryAllocator,r=48e3,u=4e3,s=20,l=4096,c=function(){function n(i,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.config={inputSampleRate:i,channelCount:o},this.encodedBuffers=[],this.memory=new t(e),this._opus_encoder_create=e._opus_encoder_create,this._opus_encoder_ctl=e._opus_encoder_ctl,this._opus_encode_float=e._opus_encode_float,this._opus_encoder_destroy=e._opus_encoder_destroy,this._speex_resampler_init=e._speex_resampler_init,this._speex_resampler_process_interleaved_float=e._speex_resampler_process_interleaved_float,this._speex_resampler_destroy=e._speex_resampler_destroy,this._contrainer=new e.OggContainer(r,o,Math.floor(4294967295*Math.random())),this.OpusInitCodec(r,o,a),this.SpeexInitResampler(i,r,o),this.inputSamplesPerChannel=i*s/1e3,this.outputSamplePerChannel=r*s/1e3,this.inputBufferIndex=0,this.mInputBuffer=this.memory.mallocFloat32Buffer(this.inputSamplesPerChannel*o),this.mResampledBuffer=this.memory.mallocFloat32Buffer(this.outputSamplePerChannel*o),this.mOutputBuffer=this.memory.mallocUint8Buffer(u),this.OggGenerateIdPage(),this.OggGenerateCommentPage(),this.interleavedBuffers=1!==o?new Float32Array(l*o):void 0}var i,a,c;return i=n,(a=[{key:"encode",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.interleave(e),r=0;r<n.length;){var i=Math.min(this.mInputBuffer.length-this.inputBufferIndex,n.length-r);if(this.mInputBuffer.set(n.subarray(r,r+i),this.inputBufferIndex),this.inputBufferIndex+=i,this.inputBufferIndex>=this.mInputBuffer.length){var o=this.memory.mallocUint32(this.inputSamplesPerChannel),a=this.memory.mallocUint32(this.outputSamplePerChannel),u=this._speex_resampler_process_interleaved_float(this.resampler,this.mInputBuffer.pointer,o.pointer,this.mResampledBuffer.pointer,a.pointer);if(o.free(),a.free(),0!==u)throw new Error("Resampling error.");var s=this._opus_encode_float(this.encoder,this.mResampledBuffer.pointer,this.outputSamplePerChannel,this.mOutputBuffer.pointer,this.mOutputBuffer.length);if(s<0)throw new Error("Opus encoding error.");this._contrainer.writeStream(this.mOutputBuffer.pointer,s,this.outputSamplePerChannel,!1),this.inputBufferIndex=0}r+=i}t&&this._contrainer.writeStream(this.mOutputBuffer.pointer,0,0,!0);for(var l=1;l>0;)l=this._contrainer.producePacketPage(!1),this.OggPushPage();t&&(this._contrainer.producePacketPage(!0),this.OggPushPage())}},{key:"encodeFinalFrame",value:function(){for(var e=this.config.channelCount,t=[],n=0;n<e;++n)t.push(new Float32Array(l-this.inputBufferIndex/e));this.encode(t,!0)}},{key:"close",value:function(){e.destroy(this._contrainer),this.mInputBuffer.free(),this.mResampledBuffer.free(),this.mOutputBuffer.free(),this._opus_encoder_destroy(this.encoder),this._speex_resampler_destroy(this.resampler)}},{key:"interleave",value:function(e){var t=e.length;if(1===t)return e[0];for(var n=0;n<t;n++)for(var r=e[n],i=0;i<r.length;i++)this.interleavedBuffers[i*t+n]=r[i];return this.interleavedBuffers}},{key:"OpusInitCodec",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.memory.mallocUint32(void 0);this.encoder=this._opus_encoder_create(e,t,2049,r.pointer);var i=r.value;if(r.free(),0!==i)throw new Error("Opus encodor initialization failed.");n&&this.OpusSetOpusControl(4002,n)}},{key:"OpusSetOpusControl",value:function(e,t){var n=this.memory.mallocInt32(t);this._opus_encoder_ctl(this.encoder,e,n.pointer),n.free()}},{key:"SpeexInitResampler",value:function(e,t,n){var r=this.memory.mallocUint32(void 0);this.resampler=this._speex_resampler_init(n,e,t,6,r.pointer);var i=r.value;if(r.free(),0!==i)throw new Error("Initializing resampler failed.")}},{key:"OggGenerateIdPage",value:function(){this._contrainer.produceIDPage(),this.OggPushPage()}},{key:"OggGenerateCommentPage",value:function(){this._contrainer.produceCommentPage(),this.OggPushPage()}},{key:"OggPushPage",value:function(){if(!this._contrainer.safeToCopy())return!1;var t=new Uint8Array(e.HEAPU8.buffer,this._contrainer.getOggHeader(),this._contrainer.getOggHeaderSize()),n=new Uint8Array(e.HEAPU8.buffer,this._contrainer.getOggBody(),this._contrainer.getOggBodySize());return this.encodedBuffers.push(new Uint8Array(t).buffer),this.encodedBuffers.push(new Uint8Array(n).buffer),!0}}])&&o(i.prototype,a),c&&o(i,c),n}();e.init=function(t,n,r){e.encoder=new c(t,n,r)},e.encode=function(t){e.encoder.encode(t)},e.encodeFinalFrame=function(){e.encoder.encodeFinalFrame()},e.flush=function(){return e.encoder.encodedBuffers.splice(0,e.encoder.encodedBuffers.length)},e.close=function(){e.encoder.close()};var f,p={};for(f in e)e.hasOwnProperty(f)&&(p[f]=e[f]);e.arguments=[],e.thisProgram="./this.program",e.quit=function(e,t){throw t},e.preRun=[],e.postRun=[];var _=!1,m=!0,y="";(_||m)&&(m?y=self.location.href:document.currentScript&&(y=document.currentScript.src),a&&(y=a),y=0!==y.indexOf("blob:")?y.substr(0,y.lastIndexOf("/")+1):"",e.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(e.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),e.readAsync=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)},e.setWindowTitle=function(e){document.title=e});var d=e.print||("undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null),h=e.printErr||("undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||d);for(f in p)p.hasOwnProperty(f)&&(e[f]=p[f]);p=void 0;var v={"f64-rem":function(e,t){return e%t},debugger:function(){}};new Array(0);var g,b,w,E=0,C=function(e){E=e},A=!1;function O(e,t){e||Se("Assertion failed: "+t)}function S(){e.HEAP8=new Int8Array(g),e.HEAP16=new Int16Array(g),e.HEAP32=w=new Int32Array(g),e.HEAPU8=b=new Uint8Array(g),e.HEAPU16=new Uint16Array(g),e.HEAPU32=new Uint32Array(g),e.HEAPF32=new Float32Array(g),e.HEAPF64=new Float64Array(g)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf8"),"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var T=38496;function M(){Se("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+P+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}var P=e.TOTAL_MEMORY||16777216;function R(t){for(;t.length>0;){var n=t.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?e.dynCall_v(r):e.dynCall_vi(r,n.arg):r(void 0===n.arg?null:n.arg)}else n()}}P<5242880&&h("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+P+"! (TOTAL_STACK=5242880)"),e.buffer?g=e.buffer:("object"===("undefined"==typeof WebAssembly?"undefined":i(WebAssembly))&&"function"==typeof WebAssembly.Memory?(e.wasmMemory=new WebAssembly.Memory({initial:P/65536,maximum:P/65536}),g=e.wasmMemory.buffer):g=new ArrayBuffer(P),e.buffer=g),S(),w[T>>2]=5281632;var x=[],B=[],I=[],j=[],L=!1;Math.abs;var k=Math.cos,N=Math.sin,D=(Math.tan,Math.acos,Math.asin,Math.atan,Math.atan2,Math.exp,Math.log,Math.sqrt,Math.ceil,Math.floor,Math.pow,Math.imul,Math.fround,Math.round,Math.min,Math.max,Math.clz32,Math.trunc,0),U=null,F=null;e.preloadedImages={},e.preloadedAudios={};var H="data:application/octet-stream;base64,";function W(e){return String.prototype.startsWith?e.startsWith(H):0===e.indexOf(H)}var z,V="OggOpusEncoder.wasm";function G(t){var n=e.buffer;t.byteLength<n.byteLength&&h("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r,i=new Int8Array(n);new Int8Array(t).set(i),r=t,e.buffer=g=r,S()}function K(){try{if(e.wasmBinary)return new Uint8Array(e.wasmBinary);if(e.readBinary)return e.readBinary(V);throw"both async and sync fetching of the wasm failed"}catch(e){Se(e)}}function Y(t){if("object"!==("undefined"==typeof WebAssembly?"undefined":i(WebAssembly)))return h("no native wasm support detected"),!1;if(!(e.wasmMemory instanceof WebAssembly.Memory))return h("no native wasm Memory in use"),!1;t.memory=e.wasmMemory;var n={global:{NaN:NaN,Infinity:1/0},"global.Math":Math,env:t,asm2wasm:v,parent:e};function r(t,n){var r=t.exports;r.memory&&G(r.memory),e.asm=r,function(t){if(D--,e.monitorRunDependencies&&e.monitorRunDependencies(D),0==D&&(null!==U&&(clearInterval(U),U=null),F)){var n=F;F=null,n()}}()}if(D++,e.monitorRunDependencies&&e.monitorRunDependencies(D),e.instantiateWasm)try{return e.instantiateWasm(n,r)}catch(e){return h("Module.instantiateWasm callback failed with error: "+e),!1}function o(e){r(e.instance)}function a(t){(e.wasmBinary||!_&&!m||"function"!=typeof fetch?new Promise(function(e,t){e(K())}):fetch(V,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+V+"'";return e.arrayBuffer()}).catch(function(){return K()})).then(function(e){return WebAssembly.instantiate(e,n)}).then(t,function(e){h("failed to asynchronously prepare wasm: "+e),Se(e)})}return e.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||W(V)||"function"!=typeof fetch?a(o):WebAssembly.instantiateStreaming(fetch(V,{credentials:"same-origin"}),n).then(o,function(e){h("wasm streaming compile failed: "+e),h("falling back to ArrayBuffer instantiation"),a(o)}),{}}W(V)||(z=V,V=e.locateFile?e.locateFile(z,y):y+z),e.reallocBuffer=function(t){return function(t){var n,r;(n=t)%(r=65536)>0&&(n+=r-n%r),t=n;var i=e.buffer.byteLength;try{return-1!==e.wasmMemory.grow((t-i)/65536)?e.buffer=e.wasmMemory.buffer:null}catch(e){return null}}(t)},e.asm=function(t,n,r){if(!n.table){var o=e.wasmTableSize,a=e.wasmMaxTableSize;"object"===("undefined"==typeof WebAssembly?"undefined":i(WebAssembly))&&"function"==typeof WebAssembly.Table?n.table=void 0!==a?new WebAssembly.Table({initial:o,maximum:a,element:"anyfunc"}):new WebAssembly.Table({initial:o,element:"anyfunc"}):n.table=new Array(o),e.wasmTable=n.table}return n.__memory_base||(n.__memory_base=e.STATIC_BASE),n.__table_base||(n.__table_base=0),Y(n)},e.STATIC_BASE=1024,e.STATIC_BUMP=37728;var X=38736;function q(e){try{return ve(e)}catch(e){}}function Q(){return!!Q.uncaught_exception}var Z={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||Z.infos[e])return e;for(var t in Z.infos)for(var n=+t,r=Z.infos[n].adjusted,i=r.length,o=0;o<i;o++)if(r[o]===e)return n;return e},addRef:function(e){e&&Z.infos[e].refcount++},decRef:function(t){if(t){var n=Z.infos[t];O(n.refcount>0),n.refcount--,0!==n.refcount||n.rethrown||(n.destructor&&e.dynCall_vi(n.destructor,t),delete Z.infos[t],q(t))}},clearRef:function(e){e&&(Z.infos[e].refcount=0)}};function J(){var t=Z.last;if(!t)return 0|(C(0),0);var n=Z.infos[t],r=n.type;if(!r)return 0|(C(0),t);var i=Array.prototype.slice.call(arguments);e.___cxa_is_pointer_type(r),J.buffer||(J.buffer=ge(4)),w[J.buffer>>2]=t,t=J.buffer;for(var o=0;o<i.length;o++)if(i[o]&&e.___cxa_can_catch(i[o],r,t))return t=w[t>>2],n.adjusted.push(t),0|(C(i[o]),t);return t=w[t>>2],0|(C(r),t)}function $(){return P}var ee=k;function te(e){return Math.pow(2,e)}function ne(e){return Math.log(e)/Math.LN10}var re=N;function ie(){var e=ie;return e.LLVM_SAVEDSTACKS||(e.LLVM_SAVEDSTACKS=[]),e.LLVM_SAVEDSTACKS.push(we()),e.LLVM_SAVEDSTACKS.length-1}e.wasmTableSize=53,e.wasmMaxTableSize=53,e.asmLibraryArg={abort:Se,assert:O,setTempRet0:C,getTempRet0:function(){return E},abortOnCannotGrowMemory:M,invoke_vii:function(t,n,r){var i=we();try{e.dynCall_vii(t,n,r)}catch(t){if(be(i),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_viii:function(t,n,r,i){var o=we();try{e.dynCall_viii(t,n,r,i)}catch(t){if(be(o),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},invoke_viiiii:function(t,n,r,i,o,a){var u=we();try{e.dynCall_viiiii(t,n,r,i,o,a)}catch(t){if(be(u),"number"!=typeof t&&"longjmp"!==t)throw t;e.setThrew(1,0)}},__ZSt18uncaught_exceptionv:Q,___cxa_allocate_exception:function(e){return ge(e)},___cxa_find_matching_catch:J,___cxa_find_matching_catch_2:function(){return J.apply(null,arguments)},___cxa_free_exception:q,___cxa_throw:function(e,t,n){throw Z.infos[e]={ptr:e,adjusted:[e],type:t,destructor:n,refcount:0,caught:!1,rethrown:!1},Z.last=e,"uncaught_exception"in Q?Q.uncaught_exception++:Q.uncaught_exception=1,e},___gxx_personality_v0:function(){},___resumeException:function(e){throw Z.last||(Z.last=e),e},___setErrNo:function(t){return e.___errno_location&&(w[e.___errno_location()>>2]=t),t},_emscripten_get_heap_size:$,_emscripten_memcpy_big:function(e,t,n){b.set(b.subarray(t,t+n),e)},_emscripten_resize_heap:function(e){M()},_llvm_cos_f64:ee,_llvm_exp2_f32:te,_llvm_exp2_f64:function(){return te.apply(null,arguments)},_llvm_log10_f32:ne,_llvm_log10_f64:function(){return ne.apply(null,arguments)},_llvm_sin_f64:re,_llvm_stackrestore:function(e){var t=ie,n=t.LLVM_SAVEDSTACKS[e];t.LLVM_SAVEDSTACKS.splice(e,1),be(n)},_llvm_stacksave:ie,DYNAMICTOP_PTR:T,tempDoublePtr:X};var oe=e.asm({},e.asmLibraryArg,g);e.asm=oe,e.___cxa_can_catch=function(){return e.asm.___cxa_can_catch.apply(null,arguments)},e.___cxa_is_pointer_type=function(){return e.asm.___cxa_is_pointer_type.apply(null,arguments)};var ae=e._emscripten_bind_OggContainer_OggContainer_3=function(){return e.asm._emscripten_bind_OggContainer_OggContainer_3.apply(null,arguments)},ue=e._emscripten_bind_OggContainer___destroy___0=function(){return e.asm._emscripten_bind_OggContainer___destroy___0.apply(null,arguments)},se=e._emscripten_bind_OggContainer_getOggBodySize_0=function(){return e.asm._emscripten_bind_OggContainer_getOggBodySize_0.apply(null,arguments)},le=e._emscripten_bind_OggContainer_getOggBody_0=function(){return e.asm._emscripten_bind_OggContainer_getOggBody_0.apply(null,arguments)},ce=e._emscripten_bind_OggContainer_getOggHeaderSize_0=function(){return e.asm._emscripten_bind_OggContainer_getOggHeaderSize_0.apply(null,arguments)},fe=e._emscripten_bind_OggContainer_getOggHeader_0=function(){return e.asm._emscripten_bind_OggContainer_getOggHeader_0.apply(null,arguments)},pe=e._emscripten_bind_OggContainer_produceCommentPage_0=function(){return e.asm._emscripten_bind_OggContainer_produceCommentPage_0.apply(null,arguments)},_e=e._emscripten_bind_OggContainer_produceIDPage_0=function(){return e.asm._emscripten_bind_OggContainer_produceIDPage_0.apply(null,arguments)},me=e._emscripten_bind_OggContainer_producePacketPage_1=function(){return e.asm._emscripten_bind_OggContainer_producePacketPage_1.apply(null,arguments)},ye=e._emscripten_bind_OggContainer_safeToCopy_0=function(){return e.asm._emscripten_bind_OggContainer_safeToCopy_0.apply(null,arguments)},de=e._emscripten_bind_OggContainer_writeStream_4=function(){return e.asm._emscripten_bind_OggContainer_writeStream_4.apply(null,arguments)},he=e._emscripten_bind_VoidPtr___destroy___0=function(){return e.asm._emscripten_bind_VoidPtr___destroy___0.apply(null,arguments)},ve=e._free=function(){return e.asm._free.apply(null,arguments)},ge=e._malloc=function(){return e.asm._malloc.apply(null,arguments)},be=(e._memcpy=function(){return e.asm._memcpy.apply(null,arguments)},e._memmove=function(){return e.asm._memmove.apply(null,arguments)},e._memset=function(){return e.asm._memset.apply(null,arguments)},e._opus_encode_float=function(){return e.asm._opus_encode_float.apply(null,arguments)},e._opus_encoder_create=function(){return e.asm._opus_encoder_create.apply(null,arguments)},e._opus_encoder_ctl=function(){return e.asm._opus_encoder_ctl.apply(null,arguments)},e._opus_encoder_destroy=function(){return e.asm._opus_encoder_destroy.apply(null,arguments)},e._rintf=function(){return e.asm._rintf.apply(null,arguments)},e._sbrk=function(){return e.asm._sbrk.apply(null,arguments)},e._speex_resampler_destroy=function(){return e.asm._speex_resampler_destroy.apply(null,arguments)},e._speex_resampler_init=function(){return e.asm._speex_resampler_init.apply(null,arguments)},e._speex_resampler_process_interleaved_float=function(){return e.asm._speex_resampler_process_interleaved_float.apply(null,arguments)},e.establishStackSpace=function(){return e.asm.establishStackSpace.apply(null,arguments)},e.setThrew=function(){return e.asm.setThrew.apply(null,arguments)},e.stackAlloc=function(){return e.asm.stackAlloc.apply(null,arguments)},e.stackRestore=function(){return e.asm.stackRestore.apply(null,arguments)}),we=e.stackSave=function(){return e.asm.stackSave.apply(null,arguments)},Ee=(e.dynCall_ii=function(){return e.asm.dynCall_ii.apply(null,arguments)},e.dynCall_iiii=function(){return e.asm.dynCall_iiii.apply(null,arguments)},e.dynCall_iiiiiii=function(){return e.asm.dynCall_iiiiiii.apply(null,arguments)},e.dynCall_v=function(){return e.asm.dynCall_v.apply(null,arguments)},e.dynCall_vi=function(){return e.asm.dynCall_vi.apply(null,arguments)},e.dynCall_vii=function(){return e.asm.dynCall_vii.apply(null,arguments)},e.dynCall_viii=function(){return e.asm.dynCall_viii.apply(null,arguments)},e.dynCall_viiii=function(){return e.asm.dynCall_viiii.apply(null,arguments)},e.dynCall_viiiii=function(){return e.asm.dynCall_viiiii.apply(null,arguments)},e.dynCall_viiiiii=function(){return e.asm.dynCall_viiiiii.apply(null,arguments)},e.dynCall_viiiiiii=function(){return e.asm.dynCall_viiiiiii.apply(null,arguments)},0);Math.random=function(){return Ee=Math.pow(Ee+1.8912,3)%1};var Ce=1e4;function Ae(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Oe(t){function n(){e.calledRun||(e.calledRun=!0,A||(L||(L=!0,R(B)),R(I),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)t=e.postRun.shift(),j.unshift(t);var t;R(j)}()))}t=t||e.arguments,D>0||(function(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)t=e.preRun.shift(),x.unshift(t);var t;R(x)}(),D>0||e.calledRun||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),n()},1)):n()))}function Se(t){throw e.onAbort&&e.onAbort(t),void 0!==t?(d(t),h(t),t=JSON.stringify(t)):t="",A=!0,"abort("+t+"). Build with -s ASSERTIONS=1 for more info."}if(Date.now=function(){return Ce++},"object"===("undefined"==typeof performance?"undefined":i(performance))&&(performance.now=Date.now),e||(e={}),e.thisProgram="thisProgram",e.asm=oe,e.then=function(t){if(e.calledRun)t(e);else{var n=e.onRuntimeInitialized;e.onRuntimeInitialized=function(){n&&n(),t(e)}}return e},Ae.prototype=new Error,Ae.prototype.constructor=Ae,F=function t(){e.calledRun||Oe(),e.calledRun||(F=t)},e.run=Oe,e.abort=Se,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();function Te(){}function Me(e){return(e||Te).__cache__}function Pe(e,t){var n=Me(t),r=n[e];return r||((r=Object.create((t||Te).prototype)).ptr=e,n[e]=r)}function Re(){throw"cannot construct a VoidPtr, no constructor in IDL"}function xe(e,t,n){e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),n&&"object"===i(n)&&(n=n.ptr),this.ptr=ae(e,t,n),Me(xe)[this.ptr]=this}return e.noExitRuntime=!0,Oe(),Te.prototype=Object.create(Te.prototype),Te.prototype.constructor=Te,Te.prototype.__class__=Te,Te.__cache__={},e.WrapperObject=Te,e.getCache=Me,e.wrapPointer=Pe,e.castObject=function(e,t){return Pe(e.ptr,t)},e.NULL=Pe(0),e.destroy=function(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete Me(e.__class__)[e.ptr]},e.compare=function(e,t){return e.ptr===t.ptr},e.getPointer=function(e){return e.ptr},e.getClass=function(e){return e.__class__},Re.prototype=Object.create(Te.prototype),Re.prototype.constructor=Re,Re.prototype.__class__=Re,Re.__cache__={},e.VoidPtr=Re,Re.prototype.__destroy__=Re.prototype.__destroy__=function(){var e=this.ptr;he(e)},xe.prototype=Object.create(Te.prototype),xe.prototype.constructor=xe,xe.prototype.__class__=xe,xe.__cache__={},e.OggContainer=xe,xe.prototype.writeStream=xe.prototype.writeStream=function(e,t,n,r){var o=this.ptr;e&&"object"===i(e)&&(e=e.ptr),t&&"object"===i(t)&&(t=t.ptr),n&&"object"===i(n)&&(n=n.ptr),r&&"object"===i(r)&&(r=r.ptr),de(o,e,t,n,r)},xe.prototype.produceIDPage=xe.prototype.produceIDPage=function(){var e=this.ptr;_e(e)},xe.prototype.produceCommentPage=xe.prototype.produceCommentPage=function(){var e=this.ptr;pe(e)},xe.prototype.producePacketPage=xe.prototype.producePacketPage=function(e){var t=this.ptr;return e&&"object"===i(e)&&(e=e.ptr),me(t,e)},xe.prototype.safeToCopy=xe.prototype.safeToCopy=function(){var e=this.ptr;return!!ye(e)},xe.prototype.getOggHeader=xe.prototype.getOggHeader=function(){var e=this.ptr;return fe(e)},xe.prototype.getOggHeaderSize=xe.prototype.getOggHeaderSize=function(){var e=this.ptr;return ce(e)},xe.prototype.getOggBody=xe.prototype.getOggBody=function(){var e=this.ptr;return le(e)},xe.prototype.getOggBodySize=xe.prototype.getOggBodySize=function(){var e=this.ptr;return se(e)},xe.prototype.__destroy__=xe.prototype.__destroy__=function(){var e=this.ptr;ue(e)},function(){function t(){}var n;e.calledRun||(n=t,I.unshift(n))}(),e});"object"===i(t)&&"object"===i(e)?e.exports=u:void 0===(r=function(){return u}.apply(t,[]))||(e.exports=r)}).call(this,n(1)(e))}]);
}
  if (typeof window !== 'undefined' &&
      typeof window.OpusMediaRecorder === 'function') {
    // If the script is imported by using <script> tag
    window.OpusMediaRecorder.encoderWorker = initWorker;
  } else if (typeof WorkerGlobalScope !== 'undefined' &&
             self instanceof WorkerGlobalScope) {
    // If it is in web worker environment
    initWorker();
  }
})();